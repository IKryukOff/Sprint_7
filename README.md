# Sprint 7. Тестирование API

Тестирование API сервиса [ЯндексСамокат](https://qa-scooter.praktikum-services.ru/) | [API ЯндексСамокат](https://qa-scooter.praktikum-services.ru/docs)
1. Основа для написания автотестов — фреймворк pytest.
2. Перед запуском тестов установить зависимости — `pip install -r requirements.txt`.
3. Команда для запуска — `pytest tests --alluredir=allure_results`.
4. Для просмотра отчета — `allure serve allure_results`

## [Создание курьера](tests/test_create_courier.py)
* курьера можно создать
* нельзя создать двух одинаковых курьеров
* чтобы создать курьера, нужно передать в ручку все обязательные поля
    > поле `firstName` не является обязательным
* запрос возвращает правильный код ответа
* успешный запрос возвращает {"ok":true}
* если одного из полей нет, запрос возвращает ошибку
* если создать пользователя с логином, который уже есть, возвращается ошибка

## [Логин курьера](tests/test_login_courier.py)
* курьер может авторизоваться
* для авторизации нужно передать все обязательные поля
* система вернёт ошибку, если неправильно указать логин или пароль
* если какого-то поля нет, запрос возвращает ошибку
    > если не передать `password`, то запрос падает с ошибкой 504 (Timeout)
* если авторизоваться под несуществующим пользователем, запрос возвращает ошибку
* успешный запрос возвращает id

## [Создание заказа](tests/test_create_order.py)
* можно указать один из цветов — BLACK или GREY
    > запрос падает с ошибкой 500 (message: values.map is not a function)
* можно указать оба цвета
* можно совсем не указывать цвет
* тело ответа содержит track

## [Список заказов](tests/test_order_list.py)
* тело ответа возвращается список заказов

## [Удалить курьера](tests/test_delete_courier.py)
* неуспешный запрос возвращает соответствующую ошибку
* успешный запрос возвращает{"ok":true}
* если отправить запрос с несуществующим id, вернётся ошибка

## [Принять заказ](tests/test_accept_order.py)
* успешный запрос возвращает{"ok":true}
* если передать неверный id курьера, запрос вернёт ошибку
* если не передать id заказа, запрос вернёт ошибку
* если передать неверный id заказа, запрос вернёт ошибку

## [Получить заказ по его номеру](tests/test_get_order.py)
* успешный запрос возвращает объект с заказом
* запрос без номера заказа возвращает ошибку
* запрос с несуществующим заказом возвращает ошибку